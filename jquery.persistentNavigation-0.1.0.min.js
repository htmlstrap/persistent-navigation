!function(o){function t(t){var i=o(window),s=t,e=t.parent(),n=s.offset().top,a={navId:"nav_"+Math.floor(Math.random()*(new Date).getTime())},h=o('<div id="'+a.navId+'"></div>').css({position:"fixed"});s.wrap(h).css({position:"absolute",top:0}),s.data("persistentNavigation",a);var p=0;i.on("scroll."+a.navId,function(){if(i.scrollTop()<p)s.position().top<0&&s.css("top",Math.min(s.position().top+p-i.scrollTop(),0));else{var o=i.height()-n;if(s.height()+s.position().top>o){var t=Math.max(s.position().top+p-i.scrollTop(),o-s.height());t+s.height()>e.height()-i.scrollTop()&&(t=e.height()-i.scrollTop()-s.height()),s.css("top",t)}else if(i.scrollTop()+i.height()>e.offset().top+e.height()){var t=Math.min(s.position().top+p-i.scrollTop(),e.height()-i.scrollTop()-s.height());t+s.height()>=e.height()-i.scrollTop()&&s.css("top",t)}}p=i.scrollTop()}).trigger("scroll")}function i(t){var i=t.data("persistentNavigation");i&&i.navId&&(o(window).off("."+i.navId),t.css({position:"",top:""}),o("#"+i.navId).replaceWith(t.remove()))}o.fn.persistentNavigation=function(s){return this.each(function(){switch(s){case"destroy":i(o(this));break;default:t(o(this))}})}}(jQuery);